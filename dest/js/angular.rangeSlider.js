!function(a,b,c){"use strict";b.module("angularLocalStorage",["ngCookies"]).factory("storage",["$parse","$cookieStore","$window","$log",function(a,d,e,f){var g="undefined"==typeof e.localStorage?c:e.localStorage,h=!("undefined"==typeof g),i={};if(h){var j="__"+Math.round(1e7*Math.random());try{localStorage.setItem(j,j),localStorage.removeItem(j)}catch(k){h=!1}}var l={parseValue:function(a){var c;try{c=b.fromJson(a),"undefined"==typeof c&&(c=a),"true"===c&&(c=!0),"false"===c&&(c=!1),e.parseFloat(c)!==c||b.isObject(c)||(c=e.parseFloat(c))}catch(d){c=a}return c},getWatcherId:function(a,b){return a.$id+b}},m={set:function(a,c){if(!h)try{return d.put(a,c),c}catch(e){f.log("Local Storage not supported, make sure you have angular-cookies enabled.")}var i=b.toJson(c);return g.setItem(a,i),l.parseValue(i)},get:function(a){if(!h)try{return d.get(a)}catch(b){return null}var c=g.getItem(a);return l.parseValue(c)},remove:function(a){if(!h)try{return d.remove(a),!0}catch(b){return!1}return g.removeItem(a),!0},bind:function(c,d,e){var f=l.getWatcherId(c,d),g={defaultValue:"",storeName:""};e=b.isString(e)?b.extend({},g,{defaultValue:e}):b.isUndefined(e)?g:b.extend(g,e);var h=e.storeName||d,j=c.$eval(d);return null===m.get(h)&&"undefined"==typeof j&&m.set(h,e.defaultValue),"undefined"==typeof j&&a(d).assign(c,m.get(h)),i[f]=c.$watch(d,function(a){b.isDefined(a)&&m.set(h,a)},!0),m.get(h)},unbind:function(b,c,d){var e=l.getWatcherId(b,c);d=d||c,a(c).assign(b,null),m.remove(d),i[e]&&(i[e](),delete i[e])},clearAll:function(){g.clear()},isCookieFallbackActive:function(){return!h}};return m}])}(window,window.angular);